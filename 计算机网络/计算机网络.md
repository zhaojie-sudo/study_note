# 计算机网络学习笔记
## 第一章 概述
    #
    1. 电路交换,报文交换,分组交换
    2. 广域网(WAN) 城域网(MAN) 局域网(LAN) 个域网(PAN)
    3. 协议数据单元PDU 对等层次之间传输的数据包
        服务数据单元SDU 层与层之间传输的数据包
    # 计算机网络体系结构
        1. OSI体系结构(七层)
        2. TCP/IP体系结构(四层)
        3. 原理体系结构
            1. 物理层 用何种信号传输比特  
            各种编码,调制
            2. 数据链路层 分组在一段链路如何传输 
            MAC帧,PPP协议
            3. 网络层 分组在多个网络上如何传输
            IP协议
            4. 传输层 进程之间关于网络的通信
            TCP协议,UDP协议
            5. 应用层 应用之间的交互实现特定应用
            http协议,dns协议,smtp协议

## 第二章 物理层
    # 编码,调制
    编码,数据转换成数字信号 调制,数据转换成模拟信号
    # 编码方法
        1. 不归零编码 存在同步问题
        2. 归零编码 自同步,编码效率低
        3. 曼切斯特编码  中间的跳变表示0,1
        4. 差分曼切斯特编码  码元开始处是否有跳变
    # 奈氏准则
        理想低通信道最高传输速率是2W
        理想带通信道最高传输速率是W
    # 香农公式
        带宽受限且有高斯白噪声的信道最高传输速率
        C=W*log2(1+S/N)
        信噪比 10*log10(S/N)
        提高数据传输速率要采用多元制(更好的调制方法),提高信噪比
    # 信道复用技术
        频分复用(FDM) 时分复用(TDM) 波分复用(WDM) 码分复用(CDM)

## 第三章 数据链路层
    # 数据链路层的三个重要问题
        封装成帧 差错检测 可靠传输
    # 以太网V2 mac帧格式
        帧头: 目的地址6字节 源地址6字节 类型2字节 
        数据载荷 46-1600字节 
        帧尾: FCS 4字节
    # PPP帧格式
        使用PPP帧格式的数据链路层向上提供不可靠服务
        帧头: 标志1字节(定界符) 地址1字节 控制1字节 协议2字节(指明分组由什么协议处理)
        数据载荷: 小于1500字节  
        帧尾: FCS 2字节 标志1字节
    # 
        以太网的媒体接入控制协议 CSMA/CD
        802.11局域网的媒体接入控制协议 CSMA/CA
    # 透明传输
        面向字节的数据链路使用字节填充(帧定界符后插入转义字符)
        面向比特的数据链路使用比特填充(每5个连续的1插入一个0)
    # 差错校验
        奇偶校验
        循环冗余校验CRC 二进制除法 原理 理解 做法
    # 可靠传输
        有线网络不需要提供可靠服务,无线网络必须提供可靠服务
        ## 停止-等待协议 SW 信道利用率低
            ### 确认与否认 
                接收方收到分组后发送ACK确认分组,有误码发送NAK分组 未收到不发送分组 
                发送方收到ACK/NAK分组后才继续发送分组
            ### 超时重传
                为防止一直收不到ACK/NAK分组，发送方一直处于等待状态 设置超时计时器
            ### 确认丢失（分组重复）
                为避免分组重复，需要对每个数据分组编号
            ### 确认迟到
                为避免确认迟到，需要对确认分组编号
        ## 回退N帧协议 GBN
            发送窗口  1<=Wt<2^n -1 接收窗口 Wr=1
            累计确认
            ![GBN](note\计算机网络\GBN.png)
        ## 选择重传协议 
            发送窗口  1<=Wt<2^(n-1) 接收窗口 1<=Wr<=Wt
            不能累积确认，必须逐一确认
            接受方按序接受分组后，才可以移动窗口
            发送方按序收到确认分组后，才可以移动窗口
            ！[SR](note\计算机网络\SR.png)
    # 媒体接入控制 MAC
        ## 静态划分信道 频分多址 时分多址 码分多址 
            不灵活 通常在物理层使用
            ### 码分多址 CDMA

        ## 动态接入控制 随机接入
            ### 载波监听多址接入/碰撞检测 CSMA/CD
            现在的以太网基于交换机和全双工连接，不再有碰撞 没必要使用CSMA/CD
                #### 多址接入
                    多个站连接到一条总线上，竞争使用总线
                #### 载波监听
                    发送帧之前检测总线是否空闲(96比特时间)
                #### 碰撞检测
                    边发送边检测，一旦碰撞，退避一段随机时间
                #### 争用期(碰撞窗口)
                    以太网端到端往返传播时延
                    争用期没有检测到碰撞，才能说明这次发送没有碰撞
                    总线不能太长
                #### 最小帧长
                    确保帧发送完成前就能检测到是否碰撞
                #### 最大帧长

                #### 阶段二进制退避算法
                    退避时间=基本退避时间(争用期)*随机数r (?如何取)

            ### 载波监听多址接入/碰撞避免 CSMA/CA
                在无线局域网中，不能使用碰撞检测CD (隐蔽站)
                #### 帧间间隔IFS
                    站点必须持续检测到信道空闲一段指定时间后才能发送帧
                    短帧间间隔 SIFS 
                    最短的帧间间隔，用来分隔开一次对话的各帧。
                    站点应当能从发送切换为接受
                    DCF帧间间隔DIFS 
                    用来发送数据帧和管理帧
                #### 退避算法
                信道空闲且待发送的数据帧不是上一次成功发送要连续发送的下一帧 不使用退避算法
                    以下情况必须使用退避算法
                    1. 在发送数据帧之前信道忙
                    2. 重传数据帧
                    3. 每一次成功发送要连续发送下一帧（防止长时间占用信道）

                #### 信道预约和虚拟载波监听
                信道预约
                1. 源站发送数据帧之前先发送一个短的控制帧RTS（请求发送）包括源地址，目的地址，此次通信所需的持续时间
                2. 目的站收到RTS后 若信道空闲，就发送一个响应控制帧CTS（允许发送） 包括持续时间
                3. 源站收到CTS后 在等待SIFS 发送数据帧
                4. 目的站收到数据帧 等待时间SIFS后 发送确认帧ACK
                虚拟载波监听
                数据帧也携带通信持续时间，这样站点只要监听到RTS，CTS,数据帧中的任何一个就能知道信道被占用的时间

                ！[CSMA_CA](note\计算机网络\CSMA_CA.png)
    # MAC地址
        网络上各接口的唯一标识
        拓展的唯一标识符EUI-48 6个字节
        广播MAC地址 FF-FF-FF-FF-FF-FF-FF
        多播MAC地址 第一个十六进制数不能整除2
    # IP地址 由网络编号和主机编号构成
    # ARP协议(地址解析协议)
        已知IP地址，得到MAC地址
        1. 源主机查ARP高速缓存表，没有则发送ARP请求报文(广播)
        2. 目的主机将源主机TP/MAC地址存到自己的ARP高速缓存表中，并发送ARP响应报文
    # 集线器hub和交换机switch
        集线器工作在物理层，只进行比特的转发 
        具有更大的冲突域和广播域
        交换机工作在数据链路层，根据帧交换表转发帧
        具有更大的广播域，可以隔离冲突域
    # 以太网交换机自学习和转发帧
        1. 收到帧登记 帧的源MAC地址进入交换机的接口号
        2. 根据目的MAC地址和帧交换表转发帧
            1. 明确转发 交换机知道从哪些接口转发(淡泊，多播，广播)
            2. 盲目转发 不知道转发到哪里 除进入交换机接口外全部转发
            3. 明确丢弃 知道不转发
    #  以太网交换机的生成树协议STP
        通过添加冗余网络提高以太网可靠性
        形成网络环路：广播风暴 收到重复广播帧 帧交换表震荡
    # 虚拟局域网VLAN
        路由器可以隔离广播域
        IEEE 802.1Q帧 对以太网的MAC帧进行了拓展 插入了4字节的VLAN标记
        交换机端口类型
        Access 连接用户计算机
        Trunk  交换机之间或者交换机，路由器之间
        Hybrid  都行
        具体实现机制？？？
## 第四章 网络层
    # 网络层需要解决什么服务
        网络层向运输层提供什么服务
            面向连接的虚电路服务
            无连接的数据报服务
        网络层寻址
        路由选择
    # TCP/IP体系结构的网际层提供的是简单灵活 无连接的 尽最大可能交付的数据包服务
    # IPv4地址的编址方法 32bit 4字节
        ## 分类编址
            ###
                A类 网络号8bit 主机号24bit 网络号以0开始
                    可指派 网络号 1-126
                B类 网络号16bit 主机号16bit 网络号以10开始
                    可指派 网络号 128.0-191.255
                C类 网络号24bit 主机号8bit  网络号以110开始
                    可指派 网络号 192.0.0-223.255.255
                D类 以1110开始 多播地址
                E类 以1111开始 保留
            ###
                只有A B C类的地址才可以分配给主机或是显示器
                主机号全0的地址为网络地址，主机号全1的地址为广播地址 都不可以分配给主机或是显示器 // 注意是主机号
                A类 最小网络号0 保留不指派 最大网络号127 本地环回测试地址 不指派
        ## 划分子网
            从主机号中借用一部分作为子网号
            用32bit的子网掩码表明IP地址的主机号被借用了几个比特作为子网号
            子网掩码用连续的比特1表示网络号和子网号 连续的比特0表示主机号
            用划分子网的IPv4地址与其相应的子网掩码做逻辑与运算得到所在子网的网络地址
        ## 无分类编址
            CIDR记法 IP地址后加斜线和网络前缀所占的比特数量
            CIDR实际上是将网络前缀都相同的连续的IP地址组成一个"CIDR地址块"
            路由聚合的方法是找共同前缀
    # IPv4地址的应用规划 ？？？ 怎么分配地址
    
    
